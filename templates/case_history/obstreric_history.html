{% extends "base.html" %}
{% load i18n staticfiles common_templatetags%}
{% block page_heading %}{% trans 'Add Clinical Case' %}{% endblock %}
{% block breadcrumbs %}
{% trans 'Obstetric History' %}
{% endblock %}
{% block content %}
{% include 'case_history/add_case_menus.html' %}
        <!-- add case content -->
        <div class="add_case_content mental_history_blk gynaecological_history">
            <div class="Patient_information add_case_container" id="patientInformation">
                <div class="row">
                    <div id="alert_message" class="alert alert-success alert-dismissible fade show" role="alert" style="display: none;">
                        <div id="alert_message_strong"></div>
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="summary_title">
                        <div class="title d-flex justify-content-between">
                            <h2 class="heading">{% trans 'Obstetric History' %}</h2>
                            <div class="arrow" id="caseSummaryArrow">
                                <svg width="15.208" height="15.208" viewBox="0 0 15.208 15.208">
                                    <defs>
                                        <style>
                                            .a {
                                            fill: #1c4976;
                                            }
                                        </style>
                                    </defs>
                                    <path class="a" d="M7.6,0a7.6,7.6,0,1,0,7.6,7.6A7.626,7.626,0,0,0,7.6,0Zm2.661,11.026L8.935,12.356,4.182,7.6,8.935,2.851l1.331,1.331L6.844,7.6Z" transform="translate(0 15.208) rotate(-90)"></path>
                                </svg>
                            </div>
                        </div>
                        <div class="add_summary_content">
                            <p>Maecenas faucibus dignissim euismod. Ut suscipit sed sem in fringilla.
                                Duis eu turpis at leo mattis dignissim. Maecenas felis leo, consequat
                                nec nisl tempus, vulputate viverra mauris. Nullam ullamcorper, magna eu
                                efficitur ultricies, nulla justovu lputate viverra mauris. Nullam
                                ullamcorper, Maecenas faucibus dignissim euismod. Ut suscipit sed sem in
                                fringilla. Duis eu turpis at leo mattis dignissim. Maecenas felis leo,
                                consequat nec nisl tempus, vulputates. Nullam
                            </p>
                            <p class="para">Maecenas faucibus dignissim</p>
                            <p>Maecenas faucibus dignissim euismod. Ut suscipit sed sem in fringilla.
                                Duis eu turpis at leo mattis dignissim. Maecenas felis leo, consequat
                                nec nisl tempus, vulputate viverra mauris. Nullam ullamcorper, magna eu
                                efficitur ultricies, nulla justovu lputate viverra mauris. Nullam
                                ullamcorper, Maecenas faucibus dignissim euismod. Ut suscipit sed sem in
                                fringilla. Duis eu turpis at leo mattis dignissim. Maecenas felis leo,
                                consequat nec nisl tempus, vulputates. Nullam
                            </p>
                            <ul class="list">
                                <li>
                                    <img src="{% static 'images/case_summary_tick_image.svg' %}" alt="case summary image">
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                                </li>
                                <li>
                                    <img src="{% static 'images/case_summary_tick_image.svg' %}" alt="case summary image">
                                    <p>Sed et diam at nulla tristique bibendum.</p>
                                </li>
                                <li>
                                    <img src="{% static 'images/case_summary_tick_image.svg' %}" alt="case summary image">
                                    <p>Vestibulum porta nunc sit amet turpis fringilla, interdum porta
                                        ligula laoreet.
                                    </p>
                                </li>
                                <li>
                                    <img src="{% static 'images/case_summary_tick_image.svg' %}" alt="case summary image">
                                    <p>Etiam sodales erat nec lobortis rutrum.</p>
                                </li>
                            </ul>
                        </div>
                        <hr class="segregation_line">
                    </div>
                    <div class="physical_general_block">
                        <div class="physical_general_div {% if obs_his_save or pregnancy_index_no or pre_preg_index_no %}active{% endif %}">
                            <div class="phy_gen_block_col">
                                <div class="physical_general_detail {% if case_obs_his.previous_pregnancies|length > 0 %}selected{% endif %} d-flex {% if pre_preg_index_no %}active{% endif %}">
                                    <div class="image">
                                        <svg id="notepad" width="28.899" height="33.074" viewBox="0 0 28.899 33.074">
                                            <g id="Group_1669" data-name="Group 1669" transform="translate(0.256 1.041)">
                                                <g id="Group_1668" data-name="Group 1668" transform="translate(0 0)">
                                                    <path id="Path_2808" data-name="Path 2808" d="M21.586,0H2.089A2.007,2.007,0,0,0,0,1.908V25.644a3.824,3.824,0,0,0,.016.43H0a3.107,3.107,0,0,0,3.21,3.18H20.193a3.345,3.345,0,0,0,3.482-3.18V1.908A2.007,2.007,0,0,0,21.586,0Zm.7,26.074a2.007,2.007,0,0,1-2.089,1.908H3.21a1.918,1.918,0,0,1-1.818-1.911c0-.121,0-9.717,0-17.085V6.359h20.89Zm0-20.986H1.393V1.908a.668.668,0,0,1,.7-.636h19.5a.668.668,0,0,1,.7.636Z" transform="translate(0 0)" fill="#b4bbc6"></path>
                                                    <path id="Path_2810" data-name="Path 2810" d="M48.62,209.124h12.4a.565.565,0,1,0,0-1.124H48.62a.565.565,0,1,0,0,1.124Z" transform="translate(-44.079 -197.114)" fill="#b4bbc6"></path>
                                                    <path id="Path_2811" data-name="Path 2811" d="M135.279,304h-6.617a.569.569,0,1,0,0,1.124h6.617a.569.569,0,1,0,0-1.124Z" transform="translate(-124.078 -285.797)" fill="#b4bbc6"></path>
                                                    <path id="Path_2812" data-name="Path 2812" d="M48.62,257.124h12.4a.565.565,0,1,0,0-1.124H48.62a.565.565,0,1,0,0,1.124Z" transform="translate(-44.079 -241.455)" fill="#b4bbc6"></path>
                                                    <g id="Path_2813" data-name="Path 2813" transform="translate(16.263 19.653)" fill="#b4bbc6">
                                                        <path d="M 6.18994140625 11.02988147735596 C 3.521191358566284 11.02988147735596 1.350001454353333 8.858691215515137 1.350001454353333 6.18994140625 C 1.350001454353333 3.521191358566284 3.521191358566284 1.350001454353333 6.18994140625 1.350001454353333 C 8.858691215515137 1.350001454353333 11.02988147735596 3.521191358566284 11.02988147735596 6.18994140625 C 11.02988147735596 8.858691215515137 8.858691215515137 11.02988147735596 6.18994140625 11.02988147735596 Z" stroke="none"></path>
                                                        <path d="M 6.18994140625 2.70000171661377 C 4.265581130981445 2.70000171661377 2.70000171661377 4.265581130981445 2.70000171661377 6.18994140625 C 2.70000171661377 8.114301681518555 4.265581130981445 9.67988109588623 6.18994140625 9.67988109588623 C 8.114301681518555 9.67988109588623 9.67988109588623 8.114301681518555 9.67988109588623 6.18994140625 C 9.67988109588623 4.265581130981445 8.114301681518555 2.70000171661377 6.18994140625 2.70000171661377 M 6.18994140625 9.5367431640625e-07 C 9.608551025390625 9.5367431640625e-07 12.37988185882568 2.771331787109375 12.37988185882568 6.18994140625 C 12.37988185882568 9.608551025390625 9.608551025390625 12.37988185882568 6.18994140625 12.37988185882568 C 2.771331787109375 12.37988185882568 9.5367431640625e-07 9.608551025390625 9.5367431640625e-07 6.18994140625 C 9.5367431640625e-07 2.771331787109375 2.771331787109375 9.5367431640625e-07 6.18994140625 9.5367431640625e-07 Z" stroke="none" fill="#f5f8f8"></path>
                                                    </g>
                                                </g>
                                            </g>
                                            <rect id="Rectangle_1807" data-name="Rectangle 1807" width="27" height="6.3" fill="#f5f8f8"></rect>
                                        </svg>
                                    </div>
                                    <div class="physical_general_label">
                                        <div class="label_div">
                                            <span class="label_image">{% trans 'Previous Pregnancy' %} <em>*</em>   </span>
                                        </div>
                                        <span class="arrow_image" id="physicalGeneralArrow">
                                        {% if case_obs_his.previous_pregnancies %}<span class="view_close_btn">View</span>{% endif %}
                                        <img src="{% static 'images/right_arrow_image.png' %}" alt="right arrow image">
                                        </span>
                                    </div>
                                    
                                    <!-- Previous Pregnancy Section -->
                                    <div class="physical_genral_right_block">
                                        <div class="physical_general_appearence" id="addAppearence">
                                            <div class="appearence_blk history_suggestion">
                                                <form id="id_pre_preg_form" class="" action="{% if case_id %}{% url 'case_history:obstreric_history' case_id=case_id %}{% else %}{% url 'case_history:obstreric_history' %}{% endif%}" method="post">{% csrf_token %}   
                                                    <div class="row">
                                                    <div class="col-sm-12">
                                                        <h2 class="heading" id="backArrow"><img src="{% static 'images/back_arrow.svg' %}" alt="black arrow"></h2>
                                                    </div>
                                                        <div class="col-sm-12">
                                                        <ul class="previous_preganency_list">
                                                            <li id="Gravida"><label>
                                                                <input type="checkbox" name="gravida" id="id_gravida" value="Gravida" {% if gravida_data.prev_pregnancies %}checked="checked"{% endif %}>
                                                                <span>Gravida</span>
                                                            </label></li>
                                                            <li id="Para"><label>
                                                                <input type="checkbox" name="para" id="id_para" value="Para" {% if para_data.prev_pregnancies %}checked="checked"{% endif %}>
                                                                <span>Para</span>
                                                            </label></li>
                                                            <li id="abortion"><label>
                                                                <input type="checkbox" name="abortion" id="id_abortion" value="Abortion" {% if abortion_data.prev_pregnancies %}checked="checked"{% endif %}>
                                                                <span>Abortion</span>
                                                            </label></li>
                                                            <li id="stillBirth"><label>
                                                                <input type="checkbox" name="stillbirth" id="id_stillbirth" value="Stillbirth" {% if stillbirth_data.prev_pregnancies %}checked="checked"{% endif %}>
                                                                <span>Stillbirth</span>
                                                            </label></li>
                                                            <li id="living"><label>
                                                                <input type="checkbox" name="living" id="id_living" value="Living" {% if living_data.prev_pregnancies %}checked="checked"{% endif %}>
                                                                <span>Living</span>
                                                            </label></li>
                                                        </ul>
                                                    </div>
                                                        {% if pre_preg_index_no %}<input type="hidden" name="pre_preg_index_no" value="{{pre_preg_index_no}}">{% endif %}
                                                        <div class="col-sm-12 col-md-6 gravida" style="display: block">
                                                            <div class="form-group">
                                                                <label>Gravida</label>
                                                                <input type="text" name="gravida_value" class="form-control" id="id_gravida_value" value="{% if gravida_data %}{{gravida_data.value}}{% endif %}">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-12 empty">
                                                        </div>
                                                        <div class="col-sm-12 col-md-6 para" {% if para_data.prev_pregnancies %}style="display: block;"{% endif %}>
                                                            <div class="form-group">
                                                                <label>Para</label>
                                                                <input type="text" name="para_value" class="form-control" id="id_para_value" value="{% if para_data %}{{para_data.value}}{% endif %}">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-12 empty">
                                                        </div>
                                                        <div class="col-sm-12 col-md-6 abortion" {% if abortion_data.prev_pregnancies %}style="display: block;"{% endif %}>
                                                            <div class="form-group">
                                                                <label>Abortion</label>
                                                                <input type="text" name="abortion_value" class="form-control" id="id_abortion_value" value="{% if abortion_data %}{{abortion_data.value}}{% endif %}">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-12 empty">
                                                        </div>
                                                        <div class="col-sm-12 col-md-6 stillbirth" {% if stillbirth_data.prev_pregnancies %}style="display: block;"{% endif %}>
                                                            <div class="form-group">
                                                                <label>Stillbirth</label>
                                                                <input type="text" name="stillbirth_value" class="form-control" id="id_stillbirth_value" value="{% if stillbirth_data %}{{stillbirth_data.value}}{% endif %}">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-12 empty">
                                                        </div>
                                                        <div class="col-sm-12 col-md-6 living" {% if living_data.prev_pregnancies %}style="display: block;"{% endif %}>
                                                            <div class="form-group">
                                                                <label>Living</label>
                                                                <input type="text" name="living_value" class="form-control" id="id_living_value" value="{% if living_data %}{{living_data.value}}{% endif %}">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-12">
                                                            <div class="button">
                                                                <button type="submit" id="pre_preg_form" name="obs_form" value="obs_form" class="save checking_value">Save</button>
                                                                <a href="{% if case_id %}{% url 'case_history:obstreric_history' case_id=case_id %}{% else %}{% url 'case_history:obstreric_history' %}{% endif %}" class="cancel">{% trans 'Cancel' %}</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Previous Pregnancy Ends -->
                                </div>
                                {% if case_obs_his.previous_pregnancies|length > 0 %}
                                <div class="desire_success_block">
                                    <div class="family_history_success gynaecological_success">
                                        
                                        <div class="label">  
                                        {% for i in case_obs_his.previous_pregnancies %}
                                            <span class="label_detail">
                                                <span>{% if i.prev_pregnancies %}{{i.prev_pregnancies}}</span>- {% if i.value %}{{i.value}}{% endif %}{% endif %}</span>
                                        {% endfor %}
                                        </div>
                                        
                                        <div class="acton">
                                            <span class="delete">
                                                <a href="javascript:void(0);">
                                                    <img src="{% static 'images/trash.svg' %}" alt="delete image" data-info="{{forloop.counter}}" data-info1="Previous Pregnancy" class="delete_entity">
                                                </a>
                                            </span>
                                            <span class="edit">
                                                <img src="{% static 'images/edit_img.svg' %}" alt="edit image">
                                            </span>
                                        </div>
                                    </div>
                                    
                                </div>
                                {% endif %}
                                
                            </div>
                            {% if case_obs_his.pregnancy|length > 0 %}
                            {% for pregnancy in case_obs_his.pregnancy %}
                            <div class="phy_gen_block_col pregnancy_numcount" id="id_pregnancy_numcount">
                                <div class="physical_general_detail selected d-flex {% if save_index_no ==  forloop.counter|stringformat:'i' %}active {% elif pregnancy_index_no == forloop.counter|stringformat:'i'%}active{% endif %}">
                                    <div class="image">
                                        <svg id="notepad" width="28.899" height="33.074" viewBox="0 0 28.899 33.074">
                                            <g id="Group_1669" data-name="Group 1669" transform="translate(0.256 1.041)">
                                                <g id="Group_1668" data-name="Group 1668" transform="translate(0 0)">
                                                    <path id="Path_2808" data-name="Path 2808" d="M21.586,0H2.089A2.007,2.007,0,0,0,0,1.908V25.644a3.824,3.824,0,0,0,.016.43H0a3.107,3.107,0,0,0,3.21,3.18H20.193a3.345,3.345,0,0,0,3.482-3.18V1.908A2.007,2.007,0,0,0,21.586,0Zm.7,26.074a2.007,2.007,0,0,1-2.089,1.908H3.21a1.918,1.918,0,0,1-1.818-1.911c0-.121,0-9.717,0-17.085V6.359h20.89Zm0-20.986H1.393V1.908a.668.668,0,0,1,.7-.636h19.5a.668.668,0,0,1,.7.636Z" transform="translate(0 0)" fill="#b4bbc6"></path>
                                                    <path id="Path_2810" data-name="Path 2810" d="M48.62,209.124h12.4a.565.565,0,1,0,0-1.124H48.62a.565.565,0,1,0,0,1.124Z" transform="translate(-44.079 -197.114)" fill="#b4bbc6"></path>
                                                    <path id="Path_2811" data-name="Path 2811" d="M135.279,304h-6.617a.569.569,0,1,0,0,1.124h6.617a.569.569,0,1,0,0-1.124Z" transform="translate(-124.078 -285.797)" fill="#b4bbc6"></path>
                                                    <path id="Path_2812" data-name="Path 2812" d="M48.62,257.124h12.4a.565.565,0,1,0,0-1.124H48.62a.565.565,0,1,0,0,1.124Z" transform="translate(-44.079 -241.455)" fill="#b4bbc6"></path>
                                                    <g id="Path_2813" data-name="Path 2813" transform="translate(16.263 19.653)" fill="#b4bbc6">
                                                        <path d="M 6.18994140625 11.02988147735596 C 3.521191358566284 11.02988147735596 1.350001454353333 8.858691215515137 1.350001454353333 6.18994140625 C 1.350001454353333 3.521191358566284 3.521191358566284 1.350001454353333 6.18994140625 1.350001454353333 C 8.858691215515137 1.350001454353333 11.02988147735596 3.521191358566284 11.02988147735596 6.18994140625 C 11.02988147735596 8.858691215515137 8.858691215515137 11.02988147735596 6.18994140625 11.02988147735596 Z" stroke="none"></path>
                                                        <path d="M 6.18994140625 2.70000171661377 C 4.265581130981445 2.70000171661377 2.70000171661377 4.265581130981445 2.70000171661377 6.18994140625 C 2.70000171661377 8.114301681518555 4.265581130981445 9.67988109588623 6.18994140625 9.67988109588623 C 8.114301681518555 9.67988109588623 9.67988109588623 8.114301681518555 9.67988109588623 6.18994140625 C 9.67988109588623 4.265581130981445 8.114301681518555 2.70000171661377 6.18994140625 2.70000171661377 M 6.18994140625 9.5367431640625e-07 C 9.608551025390625 9.5367431640625e-07 12.37988185882568 2.771331787109375 12.37988185882568 6.18994140625 C 12.37988185882568 9.608551025390625 9.608551025390625 12.37988185882568 6.18994140625 12.37988185882568 C 2.771331787109375 12.37988185882568 9.5367431640625e-07 9.608551025390625 9.5367431640625e-07 6.18994140625 C 9.5367431640625e-07 2.771331787109375 2.771331787109375 9.5367431640625e-07 6.18994140625 9.5367431640625e-07 Z" stroke="none" fill="#f5f8f8"></path>
                                                    </g>
                                                </g>
                                            </g>
                                            <rect id="Rectangle_1807" data-name="Rectangle 1807" width="27" height="6.3" fill="#f5f8f8"></rect>
                                        </svg>
                                    </div>
                                    <div class="physical_general_label">
                                        <div class="label_div">
                                            <span class="label_image">{% trans 'Pregnancy ' %}{{forloop.counter}}</span>
                                        </div>
                                        <span class="arrow_image" id="physicalGeneralArrow">
                                        {% if pregnancy.antenatal or pregnancy.postnatal %}
                                        <span class="view_close_btn">View</span>
                                        {% endif %}
                                        <a href="{% url 'case_history:obstreric_history' case_id=case_id %}?pregnancy_index_no={{forloop.counter}}" id="edit_postnatal">
                                            <img src="{% static 'images/right_arrow_image.png' %}" alt="right arrow image">
                                        </a>
                                        <!-- <img src="{% static 'images/right_arrow_image.png' %}" alt="right arrow image"> -->
                                        </span>
                                    </div>
                                    
                                    <!-- Pregnency Section -->
                                    <div class="physical_genral_right_block">
                                        <div class="physical_general_appearence {% if save_index_no ==  forloop.counter|stringformat:'i' %}active {% elif pregnancy_index_no == forloop.counter|stringformat:'i'%}active{% endif %}" id="preganencyBlk">
                                            <div class="appearence_blk">
                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <h2 class="heading" id="backArrow"><img src="{% static 'images/back_arrow.svg' %}" alt="black arrow"></h2>
                                                    </div>
                                                    <div class="col-sm-12 radio_button_block" id="checkboxLabel">
                                                        <div class="appetite_block">
                                                            <label class="appetite_radio {% if pregnancy_index_no and antenatal_index_no %}active{% endif %}">
                                                            <input type="checkbox" id="radioCheck" {% if pregnancy_index_no and antenatal_index_no %}checked{% endif %} name="Antenatal" value="Antenatal">
                                                            <span>Antenatal</span>
                                                            </label>
                                                            <div class="appetite_sub_div">
                                                                <div class="appetite_sub_block">
                                                                    <form id="id_antenatal_form" class="" action="{% if case_id %}{% url 'case_history:obstreric_history' case_id=case_id %}{% else %}{% url 'case_history:obstreric_history' %}{% endif%}" method="post">{% csrf_token %}
                                                                        <input type="hidden" name="pregnancy_index_no" value="{{forloop.counter}}">
                                                                        <input type="hidden" name="new_add_pregnancy_index_no" value="1">
                                                                        <div class="row">
                                                                            <div class="col-sm-12">
                                                                                <h2 class="heading"><img src="{% static 'images/back_arrow.svg' %}" alt="black arrow"></h2>
                                                                            </div>
                                                                            <div class="col-sm-12 margin-top">
                                                                                <div class="form-group">
                                                                                    <label>Period Of Pregnancy</label>
                                                                                    <input type="text" name="period_of_pregnancy" value="{% if antenatal_data.period_of_pregnancy %}{{antenatal_data.period_of_pregnancy}}{% endif %}" class="form-control" placeholder="" maxlength="250" id="id_period_of_pregnancy">
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12">
                                                                                <div class="form-group city_state_label">
                                                                                    <label>Complaints During Pregnancy</label>
                                                                                    <select id="id_comp_during_pregnancy"  name="comp_during_pregnancy" class="input_conatiner select_comp_during_pregnancy_{{forloop.counter}} form-control" multiple="multiple"></select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12">
                                                                                <div class="form-group">
                                                                                    <label>Remarks</label>
                                                                                    <textarea name="complaint_during_pregnancy_remarks" class="form-control" id="id_complaint_during_pregnancy_remarks">
                                                                                        {% if antenatal_data %}
                                                                                        {% for i in antenatal_data.complaints_during_pregnancy %}
                                                                                        {% if forloop.counter == 1 %}
                                                                                            {{i.remarks}}
                                                                                        {% endif %}
                                                                                        {% endfor %}
                                                                                        {% endif %}
                                                                                    </textarea>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12">
                                                                                <div class="form-group res_rat_blk  position-relative">
                                                                                    <label>{{nat_of_lab_form.nature_of_labor.label}}</label>
                                                                                    <select id="id_nature_of_labor"  name="nature_of_labor" class="input_conatiner select_nature_of_labor_{{forloop.counter}} form-control" multiple="multiple"></select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12">
                                                                                <div class="form-group">
                                                                                    <label>{{nat_of_lab_form.remarks.label}}</label>
                                                                                    {{nat_of_lab_form.remarks}}
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12 col-md-12">
                                                                                <div class="form-group">
                                                                                    <label>Nature Of Delivery</label>
                                                                                    <div class="alive_dead_div" id="ObstrericLabel">
                                                                                        <label class="dead_alive_blk">
                                                                                            <input type="radio" name="nature_of_delivery" {% if antenatal_data.nature_of_delivery == 'Caesarean' %}{% else %}checked="checked"{% endif %} id="normal" class="normal_caesarean_checkbox" value="Normal">
                                                                                            <span>{% trans 'Normal' %}</span>
                                                                                        </label>
                                                                                        <label class="dead_alive_blk">
                                                                                            <input type="radio" name="nature_of_delivery" {% if antenatal_data.nature_of_delivery == 'Caesarean' %}checked="checked"{% endif %} id="caesarean" class="normal_caesarean_checkbox" value="Caesarean">
                                                                                            <span >{% trans 'Caesarean' %}</span>
                                                                                        </label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12 normal_nature_deleviry" {% if antenatal_data.nature_of_delivery == 'Caesarean' %}style="display:none;"{% else %}style="display:block;"{% endif %}>
                                                                                <div class="form-group">
                                                                                    <select name="nature_of_delivery_normal" class="form-control" id="id_nature_of_delivery_normal">
                                                                                        <option value="" selected="">Select</option>
                                                                                        <option value="Forceps" {% if antenatal_data.nature_of_delivery_normal == 'Forceps' %}selected{% endif %}>Forceps</option>
                                                                                        <option value="Episiotomy" {% if antenatal_data.nature_of_delivery_normal == 'Episiotomy' %}selected{% endif %}>Episiotomy</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12">
                                                                                <div class="button">
                                                                                    <button type="submit" id="antenatal_form" class="save checking_value" value="antenatal_form" name="antenatal_form">Save</button>
                                                                                    <a href="{% if case_id %}{% url 'case_history:obstreric_history' case_id=case_id %}{% else %}{% url 'case_history:obstreric_history' %}{% endif %}" class="cancel">{% trans 'Cancel' %}</a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                            <label class="appetite_radio {% if pregnancy_index_no and postnatal_index_no %}active{% endif %}">
                                                            <input type="checkbox" id="radioCheck" {% if pregnancy_index_no and postnatal_index_no %}checked{% endif %} name="Postnatal" value="Postnatal">
                                                            <span>Postnatal</span>
                                                            </label>
                                                            <div class="appetite_sub_div">
                                                                <div class="appetite_sub_block">
                                                                    <form id="id_post_nal_form" class="" action="{% if case_id %}{% url 'case_history:obstreric_history' case_id=case_id %}{% else %}{% url 'case_history:obstreric_history' %}{% endif%}" method="post">{% csrf_token %}
                                                                        <input type="hidden" name="pregnancy_index_no" value="{{forloop.counter}}">
                                                                        <input type="hidden" name="new_add_pregnancy_index_no" value="1">
                                                                        <div class="row">
                                                                            <div class="col-sm-12">
                                                                                <h2 class="heading"><img src="{% static 'images/back_arrow.svg' %}" alt="black arrow"></h2>
                                                                            </div>
                                                                            <div class="col-sm-12 margin-top">
                                                                                <div class="form-group city_state_label">
                                                                                    <label>{{post_nal_form.nature_of_puerperium.label}}</label>
                                                                                    <select id="id_nature_of_puerperium"  name="nature_of_puerperium" class="input_conatiner select_nature_of_puerperium_{{forloop.counter}} form-control" multiple="multiple"></select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12">
                                                                                <div class="form-group">
                                                                                    <label>{{post_nal_form.remarks.label}}</label>
                                                                                    {{post_nal_form.remarks}}
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12">
                                                                                <div class="button">
                                                                                    <button id="post_nal_form" type="submit" name="post_nal_form" value="post_nal_form" class="save checking_value">Save</button>
                                                                                    <a href="{% if case_id %}{% url 'case_history:obstreric_history' case_id=case_id %}{% else %}{% url 'case_history:obstreric_history' %}{% endif %}" class="cancel">{% trans 'Cancel' %}</a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                            <label class="appetite_radio {% if pregnancy_index_no and child_index_no %}active{% endif %}">
                                                            <input type="checkbox" id="radioCheck" {% if pregnancy_index_no and child_index_no %}checked{% endif %} name="Child" value="Child">
                                                            <span>Child</span>
                                                            </label>
                                                            <div class="appetite_sub_div">
                                                                <div class="appetite_sub_block">
                                                                    <form id="id_child_form" class="" action="{% if case_id %}{% url 'case_history:obstreric_history' case_id=case_id %}{% else %}{% url 'case_history:obstreric_history' %}{% endif%}" method="post">{% csrf_token %}
                                                                        {% if child_index_no %}<input type="hidden" name="child_index_no" value="{{child_index_no}}">{% endif %}
                                                                        <input type="hidden" name="pregnancy_index_no" value="{{forloop.counter}}">
                                                                        <input type="hidden" name="new_add_pregnancy_index_no" value="1">
                                                                        <div class="row">
                                                                            <div class="col-sm-12">
                                                                                <h2 class="heading"><img src="{% static 'images/back_arrow.svg' %}" alt="black arrow"></h2>
                                                                            </div>
                                                                            <div class="col-sm-12 margin-top">
                                                                                <div class="form-group">
                                                                                    <label>{{ child_form.alive.label }}</label>
                                                                                    {{ child_form.alive }}
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12">
                                                                                <div class="form-group city_state_label">
                                                                                    <label>{{ child_form.cause_of_death.label }}</label>
                                                                                    <select id="id_cause_of_death"  name="cause_of_death" class="input_conatiner select_cause_of_death_{{forloop.counter}} form-control" multiple="multiple"></select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12">
                                                                                <div class="form-group blood_pressure_blk position-relative">
                                                                                    <label>{{ child_form.birth_weight.label }}</label>
                                                                                    {{ child_form.birth_weight }}
                                                                                    <span class="mm_hg">kg/gms</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12">
                                                                                <div class="form-group">
                                                                                    <label>{{ child_form.lactation_history.label }}</label>
                                                                                    {{ child_form.lactation_history }}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-sm-12">
                                                                            <div class="button">
                                                                                <button type="submit" name="child_form" value="child_form" class="save checking_value">Save</button>
                                                                                <a href="{% if case_id %}{% url 'case_history:obstreric_history' case_id=case_id %}{% else %}{% url 'case_history:obstreric_history' %}{% endif %}" class="cancel">{% trans 'Cancel' %}</a>
                                                                            </div>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Pregnency Section Ends-->
                                </div>
                                    {% if pregnancy.antenatal.period_of_pregnancy or pregnancy.antenatal.nature_of_delivery %}
                                    <div class="desire_success_block">
                                        <div class="family_history_success gynaecological_success">
                                            <div class="label">  
                                                <span class="label_detail">
                                                    <span>{% trans 'Antenatal' %}</span>&nbsp;-&nbsp;
                                                </span>
                                            <span class="label_detail">
                                            {% if pregnancy.antenatal.period_of_pregnancy %}{{pregnancy.antenatal.period_of_pregnancy}}{% endif %}
                                            {% for j in pregnancy.antenatal.complaints_during_pregnancy %}
                                            {% if j.comp_during_pregnancy %},&nbsp;{{j.comp_during_pregnancy}}{% endif %}{% if forloop.counter == 1 %},&nbsp;{{j.remarks}}{% endif %}
                                            {% endfor %}
                                            {% if pregnancy.antenatal.nature_of_labor.nature_of_labor %},&nbsp;{{pregnancy.antenatal.nature_of_labor.nature_of_labor}}{% endif %}
                                            {% if pregnancy.antenatal.nature_of_labor.remarks %},&nbsp;{{pregnancy.antenatal.nature_of_labor.remarks}}{% endif %}
                                            {% if pregnancy.antenatal.nature_of_delivery %},&nbsp;{{pregnancy.antenatal.nature_of_delivery}}{% endif %}
                                            </span>
                                            </div>
                                            <div class="acton">
                                                <span class="delete">
                                                    <a href="javascript:void(0);">
                                                        <img src="{% static 'images/trash.svg' %}" alt="delete image" data-info="{{forloop.counter}}" data-info1="Antenatal" data-info2="{{forloop.counter}}" class="delete_entity">
                                                    </a>
                                                </span>
                                                <span class="edit">
                                                    <a href="{% url 'case_history:obstreric_history' case_id=case_id %}?pregnancy_index_no={{forloop.counter}}&antenatal_index_no={{forloop.counter}}" id="edit_antenatal">
                                                        <img src={% static "images/edit_img.svg" %} alt="edit image">
                                                    </a>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                    {% if pregnancy.postnatal.nature_of_puerperium or pregnancy.postnatal.remarks %}
                                    <div class="desire_success_block">
                                        <div class="family_history_success gynaecological_success">
                                            <div class="label">  
                                                <span class="label_detail">
                                                    <span>{% trans 'Postnatal' %}</span>&nbsp;-&nbsp;{% if pregnancy.postnatal.nature_of_puerperium %}{{pregnancy.postnatal.nature_of_puerperium}}{% endif %}{% if pregnancy.postnatal.remarks %},&nbsp;{{pregnancy.postnatal.remarks}}{% endif %}
                                                </span>
                                            </div>
                                            <div class="acton">
                                                <span class="delete">
                                                    <a href="javascript:void(0);">
                                                        <img src="{% static 'images/trash.svg' %}" alt="delete image" data-info="{{forloop.counter}}" data-info1="Postnatal" data-info2="{{forloop.counter}}" class="delete_entity">
                                                    </a>
                                                </span>
                                                <span class="edit">
                                                    <a href="{% url 'case_history:obstreric_history' case_id=case_id %}?pregnancy_index_no={{forloop.counter}}&postnatal_index_no={{forloop.counter}}" id="edit_postnatal">
                                                        <img src={% static "images/edit_img.svg" %} alt="edit image">
                                                    </a>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                    {% if pregnancy.child %}
                                    <div class="desire_success_block">
                                        {% for j in pregnancy.child %}
                                        <div class="family_history_success gynaecological_success">
                                            <div class="label">  
                                                    <span class="label_detail"><span>{% if j.alive or j.cause_of_deat or j.birth_weight or j.lactation_history %}{% trans 'Child' %}&nbsp;-&nbsp;{% endif %}</span>{% if j.alive %}{{j.alive}}{% endif %}{% if j.cause_of_death %},&nbsp;{{j.cause_of_death}}{% endif %}{% if j.birth_weight %},&nbsp;{{j.birth_weight}}{% endif %}{% if j.lactation_history %},&nbsp;{{j.lactation_history}}{% endif %}
                                                    </span>
                                            </div>
                                            <div class="acton">
                                                <span class="delete">
                                                    <a href="javascript:void(0);">
                                                        <img src="{% static 'images/trash.svg' %}" alt="delete image" data-info="{{forloop.counter}}" data-info1="Child" data-info2="{{forloop.parentloop.counter}}" class="delete_entity">
                                                    </a>
                                                </span>
                                                <span class="edit">
                                                    <a href="{% url 'case_history:obstreric_history' case_id=case_id %}?pregnancy_index_no={{forloop.parentloop.counter}}&child_index_no={{forloop.counter}}" id="edit_child">
                                                        <img src={% static "images/edit_img.svg" %} alt="edit image">
                                                    </a>
                                                </span>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                    {% endif %}
                            </div>
                            {% endfor %}
                            {% endif %}
                            <div class="phy_gen_block_col" id="add_add_preganancy_here"></div>
                            <div class="col-sm-12 add_preg_blk">
                                <div class="add_button" id="add_add_pregnancy">
                                    <button class="add_preganancy"> + Add Preganancy</button>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="button">
                                    <a href="{% if case_id %}{% url 'case_history:physical_examination_finding' case_id=case_id %}{% else %}{% url 'case_history:physical_examination_finding' %}{% endif %}" class="save">{% trans 'Save and Continue' %}</a>
                                    <button type="button" class="exit" id="exit_button_id">{% trans 'Exit' %}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- add pregnancy starts -->
        {% include 'case_history/add_pregnancy.html' %}
        
        <input type="hidden" id="id_pregnency_count" name="pregnency_count" value="{{case_obs_his.pregnancy|length}}">
        <!-- add pregnancy ends -->
        <!--Start Delete Modal Form to delete follow-up -->
        <div id="delete_entity_pop" class="modal fade in msg_popup confrm_popup modal-bgcolor1">
            <form id="delete_form" class="" action="{% if case_id %}{% url 'case_history:obstreric_history' case_id=case_id %}{% else %}{% url 'case_history:obstreric_history' %}{% endif %}" method="post">{% csrf_token %}
                <div class="modal-dialog">
                    <div class="modal-content">
                       <div class="modal-header">
                            <a href="javascript:void(0);"><button type="button" class="close" data-dismiss="modal"></button></a>
                        </div>
                        <div class="modal-body v_height_auto">
                            <p id="delete_confirm_msg_id"></p>
                            <input type="hidden" name="new_add_pregnancy_index_no" value="10">
                            <input type="hidden" id="field_id" name="field_name" value="">
                            <input type="hidden" id="index_no_id" name="index_no" value="">
                            <input type="hidden" id="preg_delete_index_id" name="preg_delete_index_no" value="">
                        </div>
                        <div class="modal-footer text-right ">
                            <button class="btn follow_up_button delete_clinc_details" type="submit" >{% trans 'Yes' %}</button>
                            <a href="javascript:void(0);" class="btn follow_up_button" data-dismiss="modal">{% trans 'No' %}</a>
                        </div>
                    </div>
                </div>
            </form>
        </div> 
        <!--Ends Delete Modal Form to delete follow-up -->
{% endblock %}
{% block jsfilesurls %}
    {{nat_of_lab_form.media}}
    {{post_nal_form.media}}
{% endblock %}
{% block custom-js %}

{% if gravida_data.prev_pregnancies %}
    $(".gravida").show();
{% endif %}
{% if para_data.prev_pregnancies %}
    $("#addAppearence .para").show();
{% endif %}
{% if abortion_data.prev_pregnancies %}
    $(" .abortion").show();
{% endif %}
{% if stillbirth_data.prev_pregnancies %}
    $(".stillbirth").show();
{% endif %}
{% if living_data.prev_pregnancies %}
    $(".living").show();
{% endif %}

/********Based on Normal or Caesarean Showing Select Starts here*******/
$(document.body).on('click','.normal_caesarean_checkbox',function(){
    var val = $(this).val();
    if(val == "Normal"){
        $(".normal_nature_deleviry").show()
    }else{
        $(".normal_nature_deleviry").hide();
        $("#id_nature_of_delivery_normal").val('');
    }
    
});
/********Based on Normal or Caesarean Showing Select Ends here*******/

$(document.body).on('click','.checking_value',function(){
    var form_id = $(this).attr('id');
    $('#id_'+form_id).submit(function (e) {
        if (!$(':text, textarea, select', this).filter(function () {
           return $.trim(this.value) != ""
        }).length){
           $("#alert_message").addClass('alert-danger');
           $("#alert_message").css("display", "block");
           $("#alert_message_strong").html("Please fill some values in the form (at least first field should be filled).");
           e.preventDefault();
        }
    });
});

/********Delete Entity Start Here*******/
$(document.body).on('click','.delete_entity',function(){
    $("#delete_entity_pop").modal();
    var index_no = $(this).data('info');
    var delete_type = $(this).data('info1');
    var preg_index_no = $(this).data('info2');
    $("#field_id").val(delete_type);
    $("#index_no_id").val(index_no);
    $("#preg_delete_index_id").val(preg_index_no);
    $('#delete_confirm_msg_id').html("Are you sure you want to delete this " +delete_type+ "?");
});
/********Delete Entity Ends Here*******/

/********Success Message Show Starts Here*******/
{% if success_note %}  
    $("#alert_message_strong").html("{{ success_note }}");
    $("#alert_message").css("display", "block");
{% endif %}
/********Success Message Show Ends Here*******/

/*****pre populating the multpile selected starts here*******/
    {% if case_id and antenatal_index_no or pregnancy_index_no %}
        {% if antenatal_index_no %}
            antenatal_index_no = '{{antenatal_index_no}}';
        {% else %}
            antenatal_index_no = '{{pregnancy_index_no}}';
        {% endif %}
    var comp_during_pregnancy = $('.select_comp_during_pregnancy_'+antenatal_index_no);
    $.ajax({
        type: 'GET',
        url: "{% url 'case_history:get_disease_names' %}",
        data : { csrfmiddlewaretoken: '{{ csrf_token }}','case_id':'{{case_id}}','antenatal_index_no':antenatal_index_no,'antenatal':'antenatal' },
    }).then(function (data) {
            $.map(data.list, function (item) {
                       var option = new Option(item.value, item.id, true, true);
                        comp_during_pregnancy.append(option).trigger('change');
                    });
            });
    {% endif %}
/*****pre populating the multpile selected Ends here*******/

/****************select multiple dropdown for Other Diagnosis starts here************/
{% if pregnancy_index_no %}
    antenatal_index_no = '{{pregnancy_index_no}}';

var select2 = $(".select_comp_during_pregnancy_"+antenatal_index_no).select2({
    tags: true,
    multiple: true,
    tokenSeparators: [',', ' '],
    minimumInputLength: 2,
    minimumResultsForSearch: 10,
    ajax: {
        url: "{% url 'case_history:get_disease_names' %}",
        dataType: "json",
        type: "GET",
        data: function (params) {
            var queryParameters = {
                term: params.term
            }
            return queryParameters;
        },
        processResults: function (data) {
        list=data.list
        if(list!=''){
               return {
               results: $.map(list, function (item) {
                return {
                    text: item.value,
                    id: item.id,
                }
                $('#id_comp_during_pregnancy').val("");
                $('#id_comp_during_pregnancy-error').remove();
            })
        };
        }
        else
        {
            $('#id_comp_during_pregnancy').val("");
            $('#id_comp_during_pregnancy-error').remove();
            $('#id_comp_during_pregnancy').after('<label id="id_comp_during_pregnancy-error" class="error" for="id_comp_during_pregnancy">Please select from the option</label>');
        }
      }
    }
});
{% endif %}
/****************select multiple dropdown for Other Diagnosis ends here************/

/*****pre populating the selected in nature of labour starts here*******/
    {% if case_id and antenatal_index_no or pregnancy_index_no %}
        {% if antenatal_index_no %}
            antenatal_index_no = '{{antenatal_index_no}}';
        {% else %}
            antenatal_index_no = '{{pregnancy_index_no}}';
        {% endif %}
    var nature_of_labour = $('.select_nature_of_labor_'+antenatal_index_no);
    $.ajax({
        type: 'GET',
        url: "{% url 'case_history:get_disease_names' %}",
        data : { csrfmiddlewaretoken: '{{ csrf_token }}','case_id':'{{case_id}}','antenatal_index_no':antenatal_index_no,'nol':'nol' },
    }).then(function (data) {
            $.map(data.list, function (item) {
                       var option = new Option(item.value, item.id, true, true);
                        nature_of_labour.append(option).trigger('change');
                    });
            });
    {% endif %}
/*****pre populating the selected in nature of labour Ends here*******/
/****************select multiple dropdown for Other Diagnosis starts here************/
{% if pregnancy_index_no %}
    antenatal_index_no = '{{pregnancy_index_no}}';
var select2 = $(".select_nature_of_labor_"+antenatal_index_no).select2({
    tags: true,
    multiple: true,
    tokenSeparators: [',', ' '],
    minimumInputLength: 2,
    minimumResultsForSearch: 10,
    ajax: {
        url: "{% url 'case_history:get_disease_names' %}",
        dataType: "json",
        type: "GET",
        data: function (params) {
            var queryParameters = {
                term: params.term
            }
            return queryParameters;
        },
        processResults: function (data) {
        list=data.list
        if(list!=''){
               return {
               results: $.map(list, function (item) {
                return {
                    text: item.value,
                    id: item.id,
                }
                $('#id_nature_of_labor').val("");
                $('#id_nature_of_labor-error').remove();
            })
        };
        }
        else
        {
            $('#id_nature_of_labor').val("");
            $('#id_nature_of_labor-error').remove();
            $('#id_nature_of_labor').after('<label id="id_nature_of_labor-error" class="error" for="id_nature_of_labor">Please select from the option</label>');
        }
      }
    }
});
{% endif %}
/****************select multiple dropdown for Other Diagnosis ends here************/

/*****pre populating the selected in nature of labour starts here*******/
    {% if case_id and postnatal_index_no or pregnancy_index_no %}
        {% if postnatal_index_no %}
            antenatal_index_no = '{{postnatal_index_no}}';
        {% else %}
            antenatal_index_no = '{{pregnancy_index_no}}';
        {% endif %}
    var postnatal = $('.select_nature_of_puerperium_'+antenatal_index_no);
    $.ajax({
        type: 'GET',
        url: "{% url 'case_history:get_disease_names' %}",
        data : { csrfmiddlewaretoken: '{{ csrf_token }}','case_id':'{{case_id}}','antenatal_index_no':antenatal_index_no,'postnatal':'postnatal' },
    }).then(function (data) {
            $.map(data.list, function (item) {
                       var option = new Option(item.value, item.id, true, true);
                        postnatal.append(option).trigger('change');
                    });
            });
    {% endif %}
/*****pre populating the selected in nature of labour Ends here*******/
/****************select dropdown for Postnatal starts here************/
{% if pregnancy_index_no %}
    antenatal_index_no = '{{pregnancy_index_no}}';
var select2 = $(".select_nature_of_puerperium_"+antenatal_index_no).select2({
    tags: true,
    multiple: true,
    tokenSeparators: [',', ' '],
    minimumInputLength: 2,
    minimumResultsForSearch: 10,
    ajax: {
        url: "{% url 'case_history:get_disease_names' %}",
        dataType: "json",
        type: "GET",
        data: function (params) {
            var queryParameters = {
                term: params.term
            }
            return queryParameters;
        },
        processResults: function (data) {
        list=data.list
        if(list!=''){
               return {
               results: $.map(list, function (item) {
                return {
                    text: item.value,
                    id: item.id,
                }
                $('#id_nature_of_puerperium').val("");
                $('#id_nature_of_puerperium-error').remove();
            })
        };
        }
        else
        {
            $('#id_nature_of_puerperium').val("");
            $('#id_nature_of_puerperium-error').remove();
            $('#id_nature_of_puerperium').after('<label id="id_nature_of_puerperium-error" class="error" for="id_nature_of_puerperium">Please select from the option</label>');
        }
      }
    }
});
{% endif %}
/****************select dropdown for Postnatal ends here************/

/*****pre populating the selected in nature of labour starts here*******/
    {% if case_id and pregnancy_index_no and not postnatal_index_no %}
        {% if child_index_no or pregnancy_index_no %}
            child_index_no = '{{child_index_no}}';
            antenatal_index_no = '{{pregnancy_index_no}}';
        {% endif %}
    var child = $('.select_cause_of_death_'+antenatal_index_no);
    $.ajax({
        type: 'GET',
        url: "{% url 'case_history:get_disease_names' %}",
        data : { csrfmiddlewaretoken: '{{ csrf_token }}','case_id':'{{case_id}}','antenatal_index_no':antenatal_index_no,'child_index_no':child_index_no },
    }).then(function (data) {
            $.map(data.list, function (item) {
                       var option = new Option(item.value, item.id, true, true);
                        child.append(option).trigger('change');
                    });
            });
    {% endif %}
/*****pre populating the selected in nature of labour Ends here*******/
/****************select dropdown for child cause of death starts here************/
{% if pregnancy_index_no %}
    antenatal_index_no = '{{pregnancy_index_no}}';
var select2 = $(".select_cause_of_death_"+antenatal_index_no).select2({
    tags: true,
    multiple: true,
    tokenSeparators: [',', ' '],
    minimumInputLength: 2,
    minimumResultsForSearch: 10,
    ajax: {
        url: "{% url 'case_history:get_disease_names' %}",
        dataType: "json",
        type: "GET",
        data: function (params) {
            var queryParameters = {
                term: params.term
            }
            return queryParameters;
        },
        processResults: function (data) {
        list=data.list
        if(list!=''){
               return {
               results: $.map(list, function (item) {
                return {
                    text: item.value,
                    id: item.id,
                }
                $('#id_cause_of_death').val("");
                $('#id_cause_of_death-error').remove();
            })
        };
        }
        else
        {
            $('#id_cause_of_death').val("");
            $('#id_cause_of_death-error').remove();
            $('#id_cause_of_death').after('<label id="id_cause_of_death-error" class="error" for="id_cause_of_death">Please select from the option</label>');
        }
      }
    }
});
{% endif %}
/****************select dropdown for child cause of death ends here************/
/*********** For Select2 error message removing drop down Starts here***************/
 $('.select2-hidden-accessible').on('change', function() {
    if($(this).valid()) {
        $(this).next('span').removeClass('error').addClass('valid');
    }
});
/*********** For Select2 error message removing drop down Ends here***************/

/*** For add pragnancy starts ***/
var template_add = $('#hidden-template_add').html();

$('#add_add_pregnancy').click(function() {
    $('#add_add_preganancy_here').after(template_add);
    
    var pregnancy_count = $('#id_pregnency_count').val();
    var pregnancy_num = parseInt(pregnancy_count)+1;
    //var conveniancecount = $("div[id*='pregnancy_numcount']").length;
    $("#pragnancy_count_id").text(pregnancy_num);
    
    $('#id_new_add_pregnancy_antenatal').val(pregnancy_num);
    $('#id_new_add_pregnancy_postnatal').val(pregnancy_num);
    $('#id_new_add_pregnancy_child').val(pregnancy_num);
    $('#id_new_add_pregnancy_index_no_child').val(pregnancy_num);
    $('#id_new_add_pregnancy_index_no_postnatal').val(pregnancy_num);
    $('#id_new_add_pregnancy_index_no_antenatal').val(pregnancy_num);
    
    
    $('.normal_caesarean_checkbox').click(function() {
        var val = $(this).val();
        if(val == "Normal"){
            $(".normal_nature_deleviry").show()
        }else{
            $(".normal_nature_deleviry").hide();
            $("#id_nature_of_delivery_normal").val('');
        }
        
    });
    $('.checking_value').click(function() {
        var form_id = $(this).attr('id');
        $('#id_'+form_id).submit(function (e) {
            if (!$(':text, textarea, select', this).filter(function () {
               return $.trim(this.value) != ""
            }).length){
               $("#alert_message").addClass('alert-danger');
               $("#alert_message").css("display", "block");
               $("#alert_message_strong").html("Please fill some values in the form (at least first field should be filled).");
               e.preventDefault();
            }
        });
    });
    $("span#physicalGeneralArrow img").click(function() {
        $(this).parent().parent().parent().addClass("active");
        $(this).parent().parent().parent().parent().parent().addClass("active");
        $(".add_clinical_case_blk").addClass("active");
        $(".phy_gen_block_col").removeClass("collapsed");
    });
    $(".physical_general_detail .physical_general_label .label_div .label_image").click(function() {
    $(".physical_general_detail").removeClass("active");
    $(".physical_general_div").removeClass("active");
        $(this).parent().parent().parent().addClass("active");
        $(this).parent().parent().parent().parent().parent().addClass("active");
        $(".add_clinical_case_blk").addClass("active");
        $(".phy_gen_block_col").removeClass("collapsed");
    });
    $('#backArrow  img').click(function() {
        $(".physical_general_detail").removeClass("active");
        $(".physical_general_div").removeClass("active");
        $(".physical_general_appearence").removeClass("active");
    $(".appetite_sub_div").prev().removeClass("active");
          $(".physical_general_detail").removeClass("edit_block_active");
        $(".physical_general_div").removeClass("edit_block");
        $(".appetite_radio").removeClass("active");

    });
      $('#addAppearence .appetite_block .appetite_radio input[type="radio"], #addAppearence .appetite_block .appetite_radio input[type="checkbox"]').click(function() {
        
        $(".appetite_radio").removeClass("active");
        if($(this).is(":checked")){
            $("#appetite ").addClass("active");
            $("#addAppearence ").addClass("active");
            $(this).parent().addClass("active");
        }
        else if($(this).is(":not(:checked)")){
            $("#appetite").removeClass("active");
            $("#addAppearence").removeClass("active");
        }
    });
 $('.appetite_sub_div .heading img').click(function() {
        $(".physical_general_appearence").removeClass("active");
        $(".appetite_sub_div").prev().removeClass("active");
    });
    $(".view_close_btn").click(function() {
        $(this).parent().parent().parent().parent().toggleClass("collapsed");
    });
    /****************select multiple dropdown for Other Diagnosis starts here************/
var select2 = $(".select_comp_during_pregnancy").select2({
    tags: true,
    multiple: true,
    tokenSeparators: [',', ' '],
    minimumInputLength: 2,
    minimumResultsForSearch: 10,
    ajax: {
        url: "{% url 'case_history:get_disease_names' %}",
        dataType: "json",
        type: "GET",
        data: function (params) {
            var queryParameters = {
                term: params.term
            }
            return queryParameters;
        },
        processResults: function (data) {
        list=data.list
        if(list!=''){
               return {
               results: $.map(list, function (item) {
                return {
                    text: item.value,
                    id: item.id,
                }
                $('#id_comp_during_pregnancy').val("");
                $('#id_comp_during_pregnancy-error').remove();
            })
        };
        }
        else
        {
            $('#id_comp_during_pregnancy').val("");
            $('#id_comp_during_pregnancy-error').remove();
            $('#id_comp_during_pregnancy').after('<label id="id_comp_during_pregnancy-error" class="error" for="id_comp_during_pregnancy">Please select from the option</label>');
        }
      }
    }
});
/****************select multiple dropdown for Other Diagnosis ends here************/


});
 
/*** For add pragnancy ends ***/
{% endblock %}
